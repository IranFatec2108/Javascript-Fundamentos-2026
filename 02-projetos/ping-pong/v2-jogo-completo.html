<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="folha"  width="600" height="500"> </canvas>
        <script>
            window.onload = function(){

                setInterval(executar, 1000 / 30);
            }
                var pontuacaoJogador1 = pontuacaoJogador2 = 0;
                var posicaoJogador1 = posicaoJogador2 = 40;
                var posicaoBolaX = posicaoBolaY = 10;
                var velocidadeBolaX = velocidadeBolaY = 5;
                var folhaDesenho = document.getElementById("folha");
                var areaDesenho = folhaDesenho.getContext("2d");

                var larguraCampo = 600;
                var alturaCampo = 500;
                var espessuraRede = 5;
                var espessuraRaquete = 11;
                var alturaRaquete = 100;
                var diametroBola = 10;

                var efeitoRaquete = 0.3;
                var velocidadeJogador2 = 5;

               folhaDesenho.addEventListener('mousemove', function(e){
                    posicaoJogador1 = e.clientY - alturaRaquete / 2;
               });

            function executar(){    

                var folhaDesenho = document.getElementById("folha");
                var areaDesenho = folhaDesenho.getContext("2d");

                //fundo
                areaDesenho.fillStyle = "#286047";
                areaDesenho.fillRect(0, 0, larguraCampo, alturaCampo);

                //rede
                areaDesenho.fillStyle = "#ffffff";
                areaDesenho.fillRect( larguraCampo / 2 - espessuraRede / 2, 0, espessuraRede, alturaCampo);

                //bola
                areaDesenho.fillRect(posicaoBolaX - diametroBola / 2, posicaoBolaY - diametroBola / 2, diametroBola, diametroBola);

                //raquetes
                areaDesenho.fillRect(0, posicaoJogador1, espessuraRaquete, alturaRaquete);
                areaDesenho.fillRect(larguraCampo - espessuraRaquete, posicaoJogador2, espessuraRaquete, alturaRaquete);

                //escrever pontuação
                
                areaDesenho.fillText("Humano - " + pontuacaoJogador1 + " pontos", 100, 100);
                areaDesenho.fillText("Computador - " + pontuacaoJogador2 + " pontos", larguraCampo - 200, 100);

                posicaoBolaX = posicaoBolaX + velocidadeBolaX;
                posicaoBolaY = posicaoBolaY + velocidadeBolaY;


                //verifica lateral supeior
                if (posicaoBolaY < 0 && velocidadeBolaY < 0){
                    velocidadeBolaY = -velocidadeBolaY;
                }

                //verifica lateral inferior
                if (posicaoBolaY > alturaCampo && velocidadeBolaY > 0){
                    velocidadeBolaY = -velocidadeBolaY;
                } 
                
                //verifica se o jogador 2 fez ponto
                if ( posicaoBolaX < 0 ){
                    if (posicaoBolaY > posicaoJogador1 && posicaoBolaY < posicaoJogador1 + alturaRaquete){
                       //rebater bola
                        velocidadeBolaX = -velocidadeBolaX;
                        var diferencaY = posicaoBolaY - (posicaoJogador1 + alturaRaquete / 2);
                        velocidadeBolaY = diferencaY * efeitoRaquete;

                    } else {
                        // ponto do jogador 2
                        pontuacaoJogador2 = pontuacaoJogador2 + 1;
                        //colocar bola no centro
                        posicaoBolaX = larguraCampo / 2;
                        posicaoBolaY = alturaCampo / 2;
                        velocidadeBolaX = -velocidadeBolaX;
                        velocidadeBolaY = 3;
                    }
                }

                //verifica se o jogador 1 fez ponto
                if ( posicaoBolaX > larguraCampo ){
                    if (posicaoBolaY > posicaoJogador2 && posicaoBolaY < posicaoJogador2 + alturaRaquete){
                       //rebater bola
                        velocidadeBolaX = -velocidadeBolaX;
                        var diferencaY = posicaoBolaY - (posicaoJogador2 + alturaRaquete / 2);
                        velocidadeBolaY = diferencaY * efeitoRaquete;

                    } else {
                        // ponto do jogador 1
                        pontuacaoJogador1 = pontuacaoJogador1 + 1;
                        //colocar bola no centro
                        posicaoBolaX = larguraCampo / 2;
                        posicaoBolaY = alturaCampo / 2;
                        velocidadeBolaX = -velocidadeBolaX;
                        velocidadeBolaY = 3;
                    }
                }

                if(posicaoJogador2 + alturaRaquete / 2 < posicaoBolaY){
                    posicaoJogador2 = posicaoJogador2 + velocidadeJogador2;
                } else {
                    posicaoJogador2 = posicaoJogador2 - velocidadeJogador2;
                }
            }

             
    </script>
   
   
</body>
</html>